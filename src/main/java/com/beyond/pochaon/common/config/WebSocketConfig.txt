//package com.beyond.pochaon.common.config;
//
//import org.springframework.beans.factory.annotation.Qualifier;
//import org.springframework.context.annotation.Configuration;
//import org.springframework.messaging.simp.config.MessageBrokerRegistry;
//import org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;
//import org.springframework.web.socket.config.annotation.StompEndpointRegistry;
//import org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;
//
//@Configuration
//@EnableWebSocketMessageBroker
//public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {
//
////    채널 1: /topic/table-status/{storeId}  → 테이블 현황판 갱신 (기존)
////    채널 2: /topic/order-queue/{storeId}   → 주문 큐 갱신 (새로 추가)
//
////    이 코드가 먼저 실행
////    websocket 서버 시작 설정
////    프론트에서 websocket 서버에 처음 연결할 때 사용하는 입구를 만듬
//    @Override
//    public void registerStompEndpoints(StompEndpointRegistry registry) {
//
////      해당 코드로 연결을 시도하면 websocket으로 연결이 수립
////        프론트에서 new SockJs('/ws-stomp')라고 호출하면 서버와 실시간 연결 시작
//        registry.addEndpoint("/ws-stomp")
//                .setAllowedOriginPatterns("*")
////                websocket을 지원하지 않는 구형 브라우저를 위한 대체 방법
//                .withSockJS();
//    }
//
////   연결된 후 메시지를 주고받는 규칙을 정함
////    메시지 규칙 설정 -> SimpMessagingTemplate 로 작동 (주입받아야됨)
//    @Override
//    @Qualifier
//    public void configureMessageBroker(MessageBrokerRegistry config) {
////     서버가 /topic으로 시작하는 주소(클라이언트)로 메시지를 보낼 수 있게 허용
////        해당 주소로 시작하는 곳에 메세지 보내면 해당 주소를 구독하는 사람이 메시질를 받을 수 있음
//        config.enableSimpleBroker("/topic");
////        메세지 보내는 코드 / /app으로 시작하는 주소로 서버에 메시지 보냄(주문할때 사용하면 좋을 거 같음)
//        config.setApplicationDestinationPrefixes("/app");
//    }
//}
///*
//1.손님이 주문 버튼 클릭
//
//2. 서버가 주문 저장 + websocket으로 메시지 발송
//
//3. 주방 화면(프론트)이 메시지 수신
//
//4. 주방 화면이 메시지 처리
//
//-화면에 새 주문 표시 ( 프론트에서 처리)
//-알림음 재생
//-주문 카드 추가
//
//
// */